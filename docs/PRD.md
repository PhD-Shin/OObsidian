# OObsidian Product Requirements Document (PRD)## 1. Product Overview**Name**: OObsidian**Type**: Desktop Application (Mac, Windows, Linux)**Core Value Proposition**: A local-first, offline-capable markdown note-taking app that integrates powerful AI chat capabilities (both local and cloud) with strict privacy controls. Users own their data and control their AI models.**Design Philosophy**:- **Offline-first**: All core features work without internet- **Lightweight Core**: Fast, minimal base app- **Plugin-based Extensibility**: Advanced features as optional plugins- **No Lock-in**: Plain markdown files, no proprietary format- **Privacy-first**: Local data, optional cloud AI**Key Differentiators**:- Multi-AI provider support (not locked to single vendor)- Multi-Agent collaboration (Genspark-style parallel responses)- AI-powered file operations (document generation, organization)- Beautiful dark-first UI inspired by Cursor/Obsidian- Plugin system for extensibility- Korean market friendly (manual licensing option)---## 2. Technical Stack### Core Technologies| Layer | Technology || -------- | ---------------------------------- || Desktop | Electron 39.x || Frontend | React 19 + TypeScript 5.9 || Styling | TailwindCSS 4.x (dark theme only) || Build | electron-vite || Editor | TipTap (ProseMirror-based WYSIWYG) || Icons | Lucide React || Layout | react-resizable-panels |### Data Storage- **Files**: Local File System (Markdown .md files)- **Config**: electron-store (JSON-based settings)- **Vector DB** (Future): SQLite + local embeddings for RAG### AI Integration**Priority System (Fallback-first Architecture)**:1. **Local First**: Ollama if installed and available2. **Online Fallback**: Cloud providers if configured3. **Graceful Degradation**: Clear guidance when no AI available**Supported Providers**:| Provider | Models | Type | Priority || ---------- | ---------------------------------- | ----- | ----------- || Ollama | Llama 3, Mistral, Gemma, CodeLlama | Local | 1 (Primary) || OpenAI | GPT-4o, GPT-4 Turbo, GPT-3.5 | Cloud | 2 || Anthropic | Claude 3.5 Sonnet, Claude 3 Opus | Cloud | 2 || Groq | Llama 3 70B, Mixtral | Cloud | 2 || Google | Gemini Pro, Gemini Ultra | Cloud | 3 || Perplexity | pplx-7b-online, pplx-70b-online | Cloud | 3 |---## 3. Key Features### 3.1 Editor &amp; File System#### Rich Markdown Editor (TipTap)- **WYSIWYG Editing**: Real-time markdown rendering- **Rich/Raw Toggle**: Switch between WYSIWYG and raw markdown- **Syntax Highlighting**: Code blocks with language detection- **Block Types**: Headings, lists, quotes, tables, code, callouts- **Keyboard Shortcuts**: Full markdown shortcuts (Cmd+B for bold, etc.)- **Slash Commands**: `/` menu for quick block insertion (planned)- **Internal Links**: `[[note]]` syntax with auto-completion (planned)#### File Explorer- **Tree View**: Hierarchical folder structure- **File Operations**: Create, rename, delete, move- **Quick Open**: Cmd+P fuzzy file search (planned)- **Hidden Files**: Filter system files (.git, node_modules)- **Sort Options**: Name, date modified, date created (planned)#### Auto-Save- **Debounced Save**: 500ms delay after typing stops- **Conflict Detection**: Warn on external file changes (planned)- **Save Indicator**: Visual feedback in status bar### 3.2 AI Intelligence System#### Offline AI (Ollama Integration)**Auto-detection &amp; Setup**:- Detect Ollama installation on app start- Show installation guide if missing- System compatibility check (RAM, disk space)- Auto-pull default model option**Graceful Fallback**:```App Start└─→ Check Ollama installed?├─→ Yes: Check models available?│ ├─→ Yes: Ready to use│ └─→ No: Offer to pull default model└─→ No: Show options├─→ Install Ollama guide└─→ Use online provider (if configured)```#### Multi-Provider Architecture```┌─────────────────────────────────────────────────┐│ AI Manager │├─────────────────────────────────────────────────┤│ Priority: Local → Online → Error ││ ││ ┌─────────┐ ┌─────────┐ ┌─────────┐ ││ │ Ollama │ │ OpenAI │ │ Claude │ ... ││ │ Adapter │ │ Adapter │ │ Adapter │ ││ └────┬────┘ └────┬────┘ └────┬────┘ ││ │ │ │ ││ └────────────┴────────────┘ ││ │ ││ Unified API Layer │└─────────────────────────────────────────────────┘```#### Multi-Agent System (Genspark-style)Concept: Multiple AI agents work in parallel to provide diverse perspectives.```User Query: "How should I structure this project?"┌──────────────────────────────────────────────────────┐│ Orchestrator │├──────────────────────────────────────────────────────┤│ ┌────────────┐ ┌────────────┐ ┌────────────┐ ││ │ Agent 1 │ │ Agent 2 │ │ Agent 3 │ ││ │ (GPT-4) │ │ (Claude) │ │ (Llama) │ ││ │ Architect │ │ Reviewer │ │ Developer │ ││ └─────┬──────┘ └─────┬──────┘ └─────┬──────┘ ││ │ │ │ ││ ▼ ▼ ▼ ││ ┌────────────────────────────────────────────┐ ││ │ Response Aggregator │ ││ │ - Merge insights │ ││ │ - Highlight consensus/disagreements │ ││ │ - Synthesize final recommendation │ ││ └────────────────────────────────────────────┘ │└──────────────────────────────────────────────────────┘```Agent Types:1. Architect: High-level design, structure suggestions2. Developer: Implementation details, code examples3. Reviewer: Critical analysis, edge cases, improvements4. Researcher: Web search, fact-checking, citations5. Writer: Prose improvement, clarity, grammarUsage Modes:`- `Single Agent: Traditional 1:1 chat`- `Council Mode: 2-3 agents discuss, user sees all perspectives`- `Consensus Mode: Agents debate, synthesize unified response#### AI File OperationsCapabilities:| Operation | Description | Confirmation Required || ---------------- | ----------------------------------- | --------------------- || Create File | Generate new documents from prompts | No || Edit File | Modify existing content | Optional || Rename File | Smart rename suggestions | Yes || Move File | Organize into folders | Yes || Delete File | Remove files | Always || Batch Operations | Process multiple files | Always |Safety Features:`- `All destructive operations require user confirmation`- `Undo history for AI-made changes`- `Preview changes before applying`- `File backup before batch operations#### Context Modes`- `No Context: General chat without file access`- `Current File: Send active document to AI`- `Selected Text: Send highlighted text only`- `Folder Context: Include all files in current folder`- `Full Vault: RAG-based search across all notes (future)`### `3.3 Chat Interface#### Chat Sidebar`- `Message History: Scrollable conversation`- `Streaming Responses: Real-time token display`- `Code Blocks: Syntax-highlighted with copy button`- `Markdown Rendering: Full markdown in responses`- `Regenerate: Re-run last query`- `Edit Message: Modify and re-send previous messages#### Agent Panel (Multi-Agent Mode)`- `Agent Cards: Show each agent's response`- `Comparison View: Side-by-side responses`- `Vote/Rating: User rates responses for learning`- `Merge Tool: Combine parts from different agents`### `3.4 Core Productivity Features`&gt; `Design Goal: Keep core lightweight. Advanced features as plugins.#### Minimal Note-Taking Essentials (Core)`- `Backlinks: Basic "notes linking here" panel`- `Internal Links: `[[note]]` syntax with auto-completion`- `Global Search: Cmd+P fuzzy file search`- `Tabs: Multiple open files#### Advanced Features (Plugins)`- `Tag Panel`- `Daily Notes`- `Graph View`- `Advanced Search`- `Ontology/Knowledge Graph`### `3.5 Settings &amp; Configuration#### API Key Management```┌────────────────────────────────────────┐│ AI Providers │├────────────────────────────────────────┤│ ○ Ollama (Local) [Connected ✓] ││ ○ OpenAI [Add API Key] ││ ○ Anthropic [Add API Key] ││ ○ Google AI [Add API Key] ││ ○ Groq [Add API Key] │└────────────────────────────────────────┘- `Secure Storage: Encrypted API key storage`- `Connection Test: Verify API connectivity`- `Usage Display: Show token usage per provider``#### Model Preferences`- `Default Model: Set preferred model per task type`- `Temperature: Adjust creativity (0.0 - 1.0)`- `Max Tokens: Limit response length`- `System Prompt: Custom instructions per model`### `3.6 Privacy &amp; Security`- `Local-First: All data stored locally by default`- `Offline-First: Core features work without internet`- `No Telemetry: Zero analytics without consent`- `Cloud Warning: Clear warning when data leaves device`- `API Key Encryption: Keys stored with OS keychain---`## `4. Plugin System`### `4.1 Architecture```┌─────────────────────────────────────────────────────────┐│ Plugin System │├─────────────────────────────────────────────────────────┤│ /plugins ││ ├── tag-panel/ ││ │ ├── manifest.json ││ │ └── index.js ││ ├── daily-notes/ ││ └── graph-view/ │├─────────────────────────────────────────────────────────┤│ Plugin API ││ ┌─────────────┐ ┌─────────────┐ ┌─────────────────┐ ││ │ Commands │ │ Panels │ │ Editor Ext. │ ││ │ registerCmd │ │ addPanel │ │ addTipTapExt │ ││ └─────────────┘ └─────────────┘ └─────────────────┘ │└─────────────────────────────────────────────────────────┘### `4.2 Plugin API`- `Menu/Command Registration: Add commands to palette`- `Panel Registration: Add sidebar panels`- `File/Note Event Hooks: React to file changes`- `Editor Extension API: Register TipTap extensions`- `Settings UI: Per-plugin settings`### `4.3 Official Plugins (Bundled)`- `Tag Panel: Tag browser and management`- `Daily Notes: Auto-create daily notes`- `Advanced Search: Full-text search with filters`- `Graph View: Note relationship visualization`### `4.4 Pro Extension Pack`- `Ontology Plugin: Goal/Project/Task/Topic/Insight/Question`- `Concept Extraction: AI-powered concept detection`- `Knowledge Graph: SKOS-based relationships``---`## `5. User Flows`### `5.1 First Launch```1. App Start└─→ Check saved vault path├─→ Valid: Load vault└─→ Invalid/None: Use default path (current directory or ~/Documents/OObsidian)### `5.2 Writing Flow```1. Click file in sidebar OR Cmd+N for new file2. Start typing markdown3. Use slash commands for blocks4. Auto-save triggers after 500ms5. See "Saved" indicator in status bar### `5.3 AI Chat Flow```1. Click AI icon in activity bar (or Cmd+Shift+A)2. Chat panel opens3. Select model from dropdown4. Type question → Enter5. See streaming response6. (Optional) Enable multi-agent mode### `5.4 AI File Operation Flow```1. Open AI chat2. Request file operation:"Create a new file called 'project-ideas.md' witha brainstorming template"3. AI generates content4. Preview shown in chat5. Click "Create File" to confirm6. File created and opened in editor```---`## `6. Subscription Model`### `Free Tier`- `Full local functionality`- `Ollama integration (unlimited)`- `BYOK (Bring Your Own Keys)`- `Single-agent mode only`- `Basic plugins`- `Community support`### `Pro Tier ($12/month or $99/year)`- `Our managed API keys (no BYOK needed)`- `Multi-agent mode`- `Priority model access`- `Advanced file operations`- `Pro plugins (Ontology, Graph)`- `Priority support`### `Manual Payment Option (Korean Market)`- `Bank transfer support`- `Manual license key issuance`- `Email receipt/invoice`- `1-year or Lifetime license options`- `Offline license verification`### `Team Tier ($20/user/month)`- `Everything in Pro`- `Shared vault collaboration (future)`- `Admin dashboard`- `SSO integration`- `Dedicated support---`## `7. Non-Functional Requirements`### `Performance| Metric | Target || -------------- | ----------------------------- || App Launch | &lt; 2 seconds || File Open | &lt; 100ms || Typing Latency | &lt; 16ms || AI First Token | &lt; 500ms (local), &lt; 1s (cloud) || Memory Usage | &lt; 300MB idle || Large Vault | 10k+ files supported |`### `Offline-First Guarantee`- `All core features work without internet`- `AI requests check provider availability`- `Local AI (Ollama) as primary option`- `Clear offline/online status indicator`### `Security`- `Electron security best practices`- `Context isolation enabled`- `No remote code execution`- `Sandboxed renderer process`- `Signed binaries (macOS, Windows)`- `Path validation (prevent directory traversal)`### `Accessibility`- `Keyboard navigation`- `Screen reader support`- `High contrast mode (future)`- `Customizable font sizes---`## `8. Competitive Analysis| Feature | OObsidian | Obsidian | Notion | Cursor || ------------- | --------- | -------- | ------- | -------- || Local-first | ✓ | ✓ | ✗ | ✓ || Offline-first | ✓ | ✓ | ✗ | Partial || Multi-AI | ✓ | ✗ | ✗ | ✗ || Multi-Agent | ✓ | ✗ | ✗ | ✗ || AI File Ops | ✓ | ✗ | Limited | ✓ || WYSIWYG | ✓ | ✓ | ✓ | ✗ || Plugin System | ✓ | ✓ | ✗ | ✗ || No Lock-in | ✓ | ✓ | ✗ | ✓ || Dark Theme | ✓ | ✓ | ✓ | ✓ || Price | Free/$12 | Free/$8 | Free/$8 | Free/$20 |---`## `9. Milestones`### `MVP (v0.1) - Completed`- `[x] Basic file explorer`- `[x] Simple markdown editor`- `[x] Ollama chat integration`- `[x] Dark theme UI`### `Alpha (v0.2) - Current`- `[x] Rich WYSIWYG editor (TipTap)`- `[x] File operations (create/rename/delete)`- `[x] Keyboard shortcuts`- `[x] Auto-default vault path`- `[ ] Multi-provider support`- `[ ] Settings panel`### `Beta (v0.3)`- `[ ] Ollama auto-detection`- `[ ] Multi-agent system`- `[ ] AI file operations`- `[ ] Global search (Cmd+P)`- `[ ] Internal links `[[note]]`- [ ] Tabs for multiple files### Release (v1.0)- [ ] Full multi-agent UI- [ ] Plugin system- [ ] Licensing/subscription- [ ] Auto-updater- [ ] Installer packages### Future (v1.x+)- [ ] Cloud sync (optional)- [ ] Mobile companion app- [ ] Team collaboration- [ ] Voice input (Whisper)- [ ] Calendar integration---## 10. Import/Export### Import- **Obsidian Vaults**: Use existing Obsidian vaults directly- **Plain Markdown**: Any folder of .md files- **No Migration Needed**: Just point to your folder### Export- **No Lock-in**: All data is plain markdown- **Backup Export**: Full vault zip export- **Plugin Data**: Exportable plugin configurations---## 11. Future Considerations- **Mobile App**: React Native companion app- **Cloud Sync**: Optional encrypted sync- **Real-time Collaboration**: Shared editing- **Voice Input**: Whisper-based voice-to-text- **Calendar Integration**: Daily notes, scheduling- **Web Clipper**: Browser extension for saving content